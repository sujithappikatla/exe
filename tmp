// WhiteboardViewModel.kt (updated)
package com.example.whiteboardapp

import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.Path
import androidx.lifecycle.ViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.asStateFlow

class WhiteboardViewModel : ViewModel() {
    // ... (previous code remains the same)

    private val _eraserWidth = MutableStateFlow(20f)
    val eraserWidth = _eraserWidth.asStateFlow()

    fun setEraserWidth(width: Float) {
        _eraserWidth.value = width
    }

    fun erase(path: Path) {
        val currentPagePaths = _pages.value[_currentPage.value].toMutableList()
        val erasedPaths = currentPagePaths.filter { pathData ->
            !pathData.path.op(path, Path.Op.INTERSECT).isEmpty
        }
        currentPagePaths.removeAll(erasedPaths)
        val updatedPages = _pages.value.toMutableList()
        updatedPages[_currentPage.value] = currentPagePaths
        _pages.value = updatedPages
    }

    fun setCanvasBackgroundColor(color: Color) {
        _canvasBackgroundColor.value = color
    }
}