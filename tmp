// WhiteboardScreen.kt (updated)
package com.example.whiteboardapp

import androidx.compose.runtime.*
import androidx.compose.ui.Modifier

@Composable
fun WhiteboardScreen(viewModel: WhiteboardViewModel) {
    // ... (previous code remains the same)

    Box(modifier = Modifier.fillMaxSize()) {
        // ... (previous code remains the same)

        Column(
            modifier = Modifier.align(Alignment.BottomCenter),
            verticalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            PageNavigation(
                currentPage = currentPage,
                totalPages = pages.size,
                onPreviousPage = { viewModel.navigateToPage(currentPage - 1) },
                onNextPage = { viewModel.navigateToPage(currentPage + 1) },
                onAddNewPage = { viewModel.addNewPage() }
            )

            ToolbarOverlay(
                modifier = Modifier.padding(bottom = 16.dp),
                viewModel = viewModel,
                onColorPickerClick = { showColorPicker = true },
                onWidthPickerClick = { showWidthPicker = true },
                onBackgroundColorClick = { showBackgroundColorPicker = true }
            )
        }
    }

    // ... (rest of the code remains the same)
}

@Composable
fun ToolbarOverlay(
    modifier: Modifier = Modifier,
    viewModel: WhiteboardViewModel,
    onColorPickerClick: () -> Unit,
    onWidthPickerClick: () -> Unit,
    onBackgroundColorClick: () -> Unit
) {
    Row(
        modifier = modifier,
        horizontalArrangement = Arrangement.spacedBy(8.dp)
    ) {
        ToolButton(
            icon = WhiteboardIcons.Pen,
            onClick = { viewModel.setTool(DrawingTool.Pen) }
        )
        ToolButton(
            icon = WhiteboardIcons.Brush,
            onClick = { viewModel.setTool(DrawingTool.Brush) }
        )
        ToolButton(
            icon = WhiteboardIcons.Eraser,
            onClick = { viewModel.setTool(DrawingTool.Eraser) }
        )
        ToolButton(
            icon = WhiteboardIcons.Undo,
            onClick = { viewModel.undo() }
        )
        ToolButton(
            icon = WhiteboardIcons.Redo,
            onClick = { viewModel.redo() }
        )
        ToolButton(
            icon = WhiteboardIcons.Color,
            onClick = onColorPickerClick
        )
        ToolButton(
            icon = WhiteboardIcons.Width,
            onClick = onWidthPickerClick
        )
        ToolButton(
            icon = WhiteboardIcons.BackgroundColor,
            onClick = onBackgroundColorClick
        )
    }
}